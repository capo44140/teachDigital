# Configuration Docker pour TeachDigital Backend
# Copiez ce fichier en .env et modifiez les valeurs selon vos besoins

# ============================================
# BASE DE DONNÉES POSTGRESQL EXTERNE
# ============================================
# IMPORTANT: Configurez l'accès à votre PostgreSQL existant

# Option 1: Utiliser les variables séparées (recommandé)
DB_HOST=host.docker.internal
# OU si PostgreSQL est sur un autre conteneur Docker sur le même réseau:
# DB_HOST=nom-du-conteneur-postgresql
# OU si PostgreSQL est sur une autre machine:
# DB_HOST=192.168.1.100

DB_HOST=your-database-host
DB_PORT=5432
DB_NAME=your-database-name
DB_USER=your-database-user
DB_PASSWORD=your-database-password
DB_SSL=false

# Option 2: Utiliser l'URL complète (alternative)
# DATABASE_URL=postgresql://teachdigital:password@host.docker.internal:5432/teachdigital
# OU pour un conteneur Docker:
# DATABASE_URL=postgresql://teachdigital:password@nom-conteneur:5432/teachdigital
# OU pour une machine externe:
# DATABASE_URL=postgresql://teachdigital:password@192.168.1.100:5432/teachdigital

# ============================================
# SÉCURITÉ
# ============================================
# Secret JWT pour signer les tokens (GÉNÉREZ UN SECRET FORT ET UNIQUE)
JWT_SECRET=teachdigital-super-secret-jwt-key-2024-change-in-production

# ============================================
# API IA (Optionnel - pour la génération de quiz)
# ============================================
# Au moins une clé API est recommandée pour utiliser la génération de quiz
# Configuration IA (Optionnel - pour les fonctionnalités avancées)
# Obtenez votre clé API OpenAI : https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here
# Configuration Gemini (Alternative gratuite à OpenAI)
# Obtenez votre clé API Gemini : https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your-gemini-api-key-here
# Configuration Groq (Alternative très rapide et gratuite)
# Obtenez votre clé API Groq : https://console.groq.com/keys
GROQ_API_KEY=your-groq-api-key-here
# Configuration Mistral (Alternative très rapide et gratuite)
# Obtenez votre clé API Mistral : 
MISTRAL_API_KEY=your-mistral-api-key-here
# Configuration Deepseek (Alternative très rapide et gratuite)
# Obtenez votre clé API Deepseek :
DEEPSEEK_API_KEY=your-deepseek-api-key-here
# Configuration Kimi / Moonshot AI (API compatible OpenAI)
# Obtenez votre clé API Kimi : https://platform.moonshot.cn/console/api-keys
KIMI_API_KEY=your-kimi-api-key-here

# LLM local (LM Studio / Ollama) - optionnel
# URL base au format OpenAI compatible: http://IP:PORT/v1
LOCAL_LLM_URL=http://192.168.1.9:1234/v1
LOCAL_LLM_MODEL=mistralai/ministral-3-14b-reasoning
# Timeout LLM local (ms) - par défaut 180000 (180s)
LOCAL_LLM_TIMEOUT_MS=180000

# ============================================
# MODE OCR
# ============================================
# "llm" = LLM Vision (GPT-4o, Gemini, LocalLLM) - meilleure qualité
# "tesseract" = Tesseract.js OCR classique - gratuit, hors-ligne
OCR_MODE=llm

# ============================================
# CONFIGURATION CORS
# ============================================
# URL du frontend pour autoriser les requêtes CORS
FRONTEND_URL=https://teach-digital.vercel.app/
ALLOWED_ORIGIN=

# ============================================
# PORTS (optionnel - valeurs par défaut)
# ============================================
BACKEND_PORT=3001
# DB_PORT est défini ci-dessus

# ============================================
# ENVIRONNEMENT
# ============================================
NODE_ENV=production
